generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id        Int      @id @default(autoincrement())
  email     String   @unique
  password  String?
  role      String
  createdAt DateTime @default(now())

  // Relations
  properties Property[]
  bookings   Booking[]
}

model Property {
  id          Int      @id @default(autoincrement())
  name        String
  location    String
  price       Float
  description String
  images      String[]
  ownerId     Int
  createdAt   DateTime @default(now())

  // Relations
  owner    User     @relation(fields: [ownerId], references: [id])
  bookings Booking[]
}

model Booking {
  id          Int      @id @default(autoincrement())
  userId      Int
  propertyId  Int
  checkIn     DateTime
  checkOut    DateTime
  status      String    @default("pending")
  totalPrice  Float
  commission  Float
  createdAt   DateTime @default(now())

  // Relations
  user     User     @relation(fields: [userId], references: [id])
  property Property @relation(fields: [propertyId], references: [id])
  payment  Payment?
}

model Payment {
  id         Int      @id @default(autoincrement())
  bookingId  Int
  provider   String
  amount     Float
  status     String    @default("pending")
  reference  String
  createdAt  DateTime @default(now())

  // Relations
  booking Booking @relation(fields: [bookingId], references: [id])
}
